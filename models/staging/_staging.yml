version: 2

models:
    
    - name: stg_meltano__conferences
      description: Staged NHL conferences data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for NHL conferences
          tests: 
            - unique
            - not_null
        - name: conference_name
          description: Name of the NHL conference
        - name: conference_url
          description: URL endpoint
        - name: conference_abbreviation
          description: Abbreviated NHL conference name
        - name: conference_short_name
          description: Short name for the NHL conference
        - name: is_active
          description: Whether or not the conference is still active

    - name: stg_meltano__divisions
      description: Staged NHL division data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for NHL divisions
          tests:
            - unique
            - not_null
        - name: conference_id
          description: Foreign key that maps to the NHL conference
        - name: division_name
          description: Name of the NHL division
        - name: division_name_short
          description: Short name for the NHL division  
        - name: division_url
          description: URL endpoint
        - name: division_abbreviation
          description: Abbreviated NHL conference name
        - name: is_active
          description: Whether or not the conference is still active        

    - name: stg_meltano__draft
      description: Staged NHL entry draft data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for an NHL rookie draft (generated via dbt_utils.surrogate_key)
          tests:
            - unique
            - not_null
        - name: overall_pick_id
          description: Unique identifier for an NHL rookie draft (draft year + overall pick)
        - name: draft_prospect_id
          description: Foreign key that maps to an NHL draft prospect
        - name: draft_team_id
          description: Foreign key that maps to the NHL team that drafted the NHL prospect
        - name: draft_year
          description: Year of the NHL entry draft
        - name: draft_overall_pick
          description: The overall pick in the NHL entry draft. For example, `1` is the first overall pick
        - name: draft_round
          description: The drafting round that the selection was made in
        - name: draft_round_pick
          description: The pick in the NHL entry draft made relative to the round
        - name: draft_prospect_name
          description: Name of the drafted NHL prospect
        - name: draft_url
          description: URL endpoint
        - name: draft_team_name
          description: Name of the NHL team that drafted the NHL prospect
    
    - name: stg_meltano__draft_prospects
      description: Staged NHL draft_prospects data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for a drafted NHL prospect
          tests:
            - unique
            - not_null
        - name: prospect_player_id
          description: Foreign key that maps to an NHL player ID
        - name: prospect_category_id
          description: Foreign key that maps to one of the four prospect categories - North American Skater (1), European Skater (2), North American Goalie (3) or European Goalie (4)
        - name: prospect_first_name
          description: First name of the NHL prospect
        - name: prospect_last_name
          description: Last name of the NHL prospect
        - name: prospect_full_name
          description: Full name of the NHL prospect
        - name: prospect_birth_date
          description: Birth date of the NHL prospect
        - name: prospect_age_years
          description: Age in years of the NHL prospect
        - name: prospect_age_days
          description: Age in days of the NHL prospect
        - name: prospect_birth_city
          description: Birth city of the NHL prospect
        - name: prospect_birth_state_province
          description: Birth state or province of the NHL prospect
        - name: prospect_birth_country
          description: Birth country of the NHL prospect
        - name: prospect_height
          description: Imperial height, in feet and inches (e.g. 5'10")
        - name: prospect_weight
          description: Imperial weight, in pounds (e.g. 140)
        - name: prospect_shoots_catches
          description: The handedness of the NHL prospect (e.g. R = right, L = left)
        - name: prospect_position_name
          description: Name of the position (e.g. Center, Left Wing, Defenseman)
        - name: prospect_position_abbreviation
          description: Abbreviation of the position (e.g. C, LW, D)
        - name: prospect_draft_status
          description: Unknown (e.g. NHL-10, NHL-54)
        - name: prospect_category_name
          description: Describes four prospect categories - North American Skater, European Skater, North American Goalie or European Goalie
        - name: prospect_category_short_name
          description: Describes four prospect categories - NA Skater, Euro Skater, NA Goalie or Euro Goalie
        - name: prospect_amateur_team_name
          description: Name of the amateur team that the NHL prospect plays for - unknown when, lots of nulls
        - name: prospect_amateur_team_url
          description: URL endpoint for amateur team
        - name: prospect_rank_midterm
          description: Unknown, lots of nulls
        - name: prospect_rank_draft_year
          description: Unknown, lots of null
        - name: prospect_url
          description: URL endpoint for the prospect

    - name: stg_meltano__boxscore_game
      description: Staged NHL boxscore data from the NHL-API (will be replaced/enhanced by linescore)
      columns:
        - name: id
          description: Unique identifier for an NHL game (game_id)
          tests:
            - unique
            - not_null
    
    - name: stg_meltano__boxscore_team
      description: Staged NHL boxscore game data from the NHL-API (game-team level)
      columns:
        - name: id
          description: Unique identifier for an team's involvement in an NHL game (game_id + team_id)
          tests:
            - unique
            - not_null
        - name: game_id
          description: Foreign key that maps to the NHL game ID - each game should have 2 rows in this table for each team involved in the game
        - name: team_id
          description: Foreign key that maps to the NHL team ID - each row represents a team playing in a game
        - name: team_type
          description: Describes the Away / Home status for each team playing in a game
        - name: team_name
          description: Name of the NHL team
        - name: team_winner
          description: True of the team scored more than the opposing team, False if the team scored less than the opposing team, NULL for Shootout results (will be fixed by linescore data, boxscore does not tell us the result of a shootout)
        - name: team_goals
          description: Number of goals scored by the team
        - name: team_goal_differential
          description: The difference between the number of goals scored, and the number of goals allowed by the team
        - name: team_pim
          description:  The number of penalties in minutes against the team
        - name: team_shots
          description: The number of shots (unsure if this is on goal or attempts) for the team
        - name: team_powerplay_goals
          description: The number of powerplay goals for the team
        - name: team_powerplay_opportunities
          description: The number of powerplay opportunities for the team
        - name: team_faceoff_percentage
          description:  The percentage of faceoffs won by the team (e.g. 100 * (faceoff wins / faceoff attempts))
        - name: team_blocked
          description: The number of blocked shots for the team
        - name: team_takeaways
          description: The number of takeaways for the team
        - name: team_giveaways
          description: The number of giveaways for the team
        - name: team_hits
          description: The number of hits for the team 
    
    - name: stg_meltano__boxscore_player
      description: Staged NHL boxscore player data from the NHL-API (game-player level)
      columns:
        - name: id
          description: Unique identifier for a player's summarized activity in an NHL game (game_id + team_id + player_id)
          tests:
            - unique
            - not_null
        - name: game_id
          description: 
        - name: team_id
          description: 
        - name: player_id
          description: 
        - name: team_name
          description: 
        - name: team_type
          description: 
        - name: player_full_name
          description: 
        - name: player_roster_status
          description: 
        - name: player_position_code
          description: 
        - name: time_on_ice
          description: 
        - name: assists
          description: 
        - name: goals
          description: 
        - name: shots
          description: 
        - name: hits
          description: 
        - name: powerplay_goals
          description: 
        - name: powerplay_assists
          description: 
        - name: penalty_minutes
          description: 
        - name: faceoff_wins
          description: 
        - name: faceoff_taken
          description: 
        - name: takeaways
          description: 
        - name: giveaways
          description: 
        - name: short_handed_goals
          description: 
        - name: short_handed_assists
          description: 
        - name: blocked
          description: 
        - name: plus_minus
          description: 
        - name: even_time_on_ice
          description: 
        - name: powerplay_time_on_ice
          description: 
        - name: short_handed_time_on_ice
          description: 
        - name: pim
          description: 
        - name: saves
          description: 
        - name: powerplay_saves
          description: 
        - name: short_handed_saves
          description: 
        - name: even_saves
          description: 
        - name: short_handed_shots_against
          description: 
        - name: even_shots_against
          description:  
        - name: powerplay_shots_against
          description:  
        - name: decision
          description:  
        - name: save_percentage
          description:  
        - name: powerplay_save_percentage
          description:  
        - name: even_strength_save_percentage
          description:  

    
    - name: stg_meltano__live_plays
      description: Staged NHL event level data from the NHL-API (player-play level)
      columns:
        - name: id
          description: Unique identifier for a player's event-level activity in an NHL game (game_id + team_id + player_id + event_id)
          tests:
            - unique
            - not_null
    
    - name: stg_meltano__players
      description: Staged NHL player data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for an NHL player
          tests:
            - unique
            - not_null
    
    - name: stg_meltano__schedule
      description: Staged NHL schedule data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for NHL scheduled games
          tests:
            - unique
            - not_null
    
    - name: stg_meltano__seasons
      description: Staged NHL seasons data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for an NHL season
          tests:
            - unique
            - not_null
    
    - name: stg_meltano__teams
      description: Staged NHL teams data from the NHL-API
      columns:
        - name: id
          description: Unique identifier for NHL teams
          tests:
            - unique
            - not_null